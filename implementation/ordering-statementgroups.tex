\section{Ordering of statement groups}\label{ordering-stat}

To find a technical solution to this problem, there was a "Request for comment" page set up. \citep{wiki:24} \\

The collection of ordered property Ids is stored on one page in the \textit{MediaWiki namespace}. This namespace ``is used to hold system messages and other important content''. \citep{wiki:17} It can only be edited by administrators. This page is called \texttt{\justify MediaWiki:Wikibase-SortedProperties}. Since the page name is set in the code, it is a constant variable. \\
The code for the ordering is not merged yet since it was decided to make it part of Wikibase instead of only being only accessible in the ArticlePlaceholder extension. That gives the possibility to reuse the code without having to build up a dependency from Wikibase to the ArticlePlaceholder extension. \\
\\
For now, the page needs to exist on the local Wikipedia. If that's not the case, or if the page is empty or filled with non-text content, the corresponding exception is thrown. For that purpose the \texttt{\justify ArticlePlaceholderException} was created, which extends PHP's \texttt{\justify RuntimeException} to among others add a message specific to the extension. \\
In the class \texttt{\justify PropertyOrderProvider} the page is parsed to a PHP Array. In this Array, the property Ids are the keys and the ordinal numbers the values. \\

To get the content of the content of the page, the MediaWiki function \texttt{\justify getNativeData()} is used. This page content is parsed in the function \texttt{\justify parseList( \$pageContent )}. To remove all comments in the HTML multiple line comment style, the following regular expression is used.
\begin{lstlisting}[frame=single]
@<!--.*?-->@s
\end{lstlisting}
The \texttt{\justify @} is the delimiter. All comments matching this pattern are replaced with empty Strings. \\
After removing all comments, all Strings matching the following regular expression are written into an Array.
\begin{lstlisting}[frame=single] 
@^\*\s*([Pp]\d+)@m
\end{lstlisting}
This regular expression matches all Strings, that contain an asterisk, optional whitespace, and a upper or lower case \textit{P} followed by a number.
The Array is flipped, to have the properties as keys. This is important when it comes to using the Array in Lua. It is not used in the \texttt{\justify mw.ext.articlePlaceholder.entityRenderer.lua} module yet, but will be in the future. It will be called similar to the image property ID. Then as it is done now with the property IDs in the case of the identifiers, every property ID contained in an item can be compared and ordered accordingly to the ordinal number of the Array. \todo{better explanation} After the sorting is implemented, it is very easy to limit the number of statements, since less important statements can be identified accordingly to their ordinal number. \\
An instance of the class is created in the \texttt{\justify ArticlePlaceholderServices}. \\
In the class \texttt{\justify Scribunto\_LuaArticlePlaceholderLibrary} in the \texttt{\justify ArticlePlaceholder\textbackslash{}Lua} namespace with the help of \texttt{\justify ArticlePlaceholderServices} the Array with the property order is returned in the function \texttt{\justify getPropertyOrder}, which then can be called in the Lua module. This is explained in more detail in the Chapter \ref{including-lua}: \nameref{including-lua}.
